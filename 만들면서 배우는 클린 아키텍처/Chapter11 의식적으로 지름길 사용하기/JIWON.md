# 의식적으로 지름길 사용하기

## 깨진 유리창 이론

하나가 망가지면 전체가 망가질 수 밖에 없다.

→ 나도 해도 되겠다는 마음이 생겨서

## 깨끗한 상태로 시작할 책임

가능한 지름길을 사용하지 않고 프로젝트를 깨끗하게 시작하는 것이 중요하다

→ 깨진 유리창을 만들지 말자

다만 지름길이 실용적인 경우가 있는데 이를 알아보자

그리고 만약 지름길을 사용했다면 잘 기록해둬서 깨진 유리창을 방치해서는 안 된다.

## 유스케이스 간 모델 공유하기

유스케이스 간 같은 입력 모델을 공유하면 유스케이스끼리 결합된다.

→ 변경할 이유를 공유 (단일 책임 원칙 위반)

이렇게 유스케이스 간 모델을 공유하려면 유스케이스들이 기능적으로 묶여있을 때 활용하도록 하자

→ **특정 요구사항을 공유하는 경우 (특정 세부사항을 변경할 때 여러 유스케이스에 영향을 주고 싶을 때)**

독립적인 유스케이스라면 입출력 모델을 분리하여 유리창을 깨지 말자

## 도메인 엔티티를 입출력 모델로 사용하기

엔티티를 인커밍 포트로 사용하는 경우가 있다.

→ 인커밍 포트가 도메인 엔티티에 의존성을 가지게 된다.

→ 도메인 엔티티에 변경할 또 다른 사유가 생긴다.

→ 유스케이스에 필요한 정보가 추가되면 도메인 엔티티를 건드리기 때문에

유스케이스가 단순히 데이터베이스 필드 몇 개를 업데이트하는 수준이 아니라 복잡한 도메인 로직을 구현해야 한다면 전용 모델을 사용하도록 하자

→ 유스케이스 변경이 도메인 엔티티까지 가지 않도록

유스케이스는 시간이 지날수록 복잡해지기 때문에 이렇게 도메인 엔티티를 입출력 모델로 사용하면 안 된다.

## 인커밍 포트 건너뛰기

아웃고잉 포트는 Application 계층과 아웃고잉 어댑터 사이의 의존성을 역전시키기 위해 필수적이지만 인커밍은 그렇지 않다.

충분히 인커밍 어댑터가 애플리케이션 서비스에 직접 접근할 수 있다.

다만 인커밍 포트가 없기 때문에 진입점을 파악하기 어려워지는 단점이 있다.

→ 애플리케이션 내부 동작을 더 자세하게 알아야 되는 단점이 있다.

아키텍처를 쉽게 강제하기 위해 인커밍 포트를 만들도록 하자

→ 어댑터가 호출할 필요가 없는 서비스 메서드를 호출하지 않게 막아주자

## 애플리케이션 서비스 건너뛰기

간단한 CRUD 유스케이스는 애플리케이션 서비스가 불필요하여 바로 영속성으로 접근해도 되는 경우가 있다.

다만 이 방법은 **인커밍 어댑터와 아웃고잉 어댑터 사이에서 모델을 공유하는 문제점이 있다.**

그리고 **유스케이스에 로직이 추가되는 경우 아웃고잉 어댑터에 이를 구현하여 도메인 로직이 응집되지 않고 퍼지는 결과를 부를 수 있다.**

**유스케이스가 복잡해지면 반드시 애플리케이션 서비스를 만들어 도메인 로직을 모을 수 있게 설계하자**
