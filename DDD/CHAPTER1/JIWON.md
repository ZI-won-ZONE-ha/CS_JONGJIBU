## 도메인?

---

온라인 서점: 구현해야 할 소프트웨어 → **소프트웨어로 해결하고자 하는 문제 영역** → 도메인

온라인 서점 도메인은 주문, 회원, 혜택, 결제, 배송, 정산, 카탈로그, 리뷰 등 하위 도메인으로 나뉜다.

특정 도메인을 위한 소프트웨어라고 도메인이 제공해야되는 모든 기능을 직접 구현하는 것은 아니고 외부 시스템과 연동하기도 한다.

하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라진다.

## 도메인 전문가와 개발자 간 지식 공유

---

각 하위 도메인 영역에는 전문가가 있고 전문가들이 도메인에 대한 지식을 바탕으로 본인들이 원하는 기능 개발을 요구한다.

개발자는 이런 요구사항을 분석하고 설계하여 코드를 작성하며 테스트하고 배포한다.

**요구사항을 올바르게 이해하지 못하면 잘못된 기능을 수행할 수 있다.**

→ 요구사항을 올바르게 이해하는 것이 정말 중요하다!!!!!

## 도메인 모델

---

도메인 모델은 특정 도메인을 개념적으로 표현한 것이다.

객체를 기반으로 도메인 모델을 설계할 수 있고, 상태 다이어그램을 통해 도메인 모델을 설계할 수 있다.

도메인을 이해하는 데 도움이 된다면 어떻게 도메인 모델을 표현하던 상관없다.

→ 도메인 자체를 이해하기 위한 개념이므로

> 하위 도메인별로 도메인 모델을 별도로 만들어줘야 한다.
하위 도메인이 다루는 영역이 서로 다르기 때문에 용어가 같더라도 의미가 다를 수 있기 때문에
> 

## 도메인 모델 패턴

---

Application 아키텍처는 일반적으로 4개의 영역으로 구성 됨

- UI, Presentation: 사용자 요청을 처리하고 정보를 보여준다.
- Application: 사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행한다.
- Domain: 시스템이 제공할 도메인 규칙을 구현한다.
- Infrastructure: 데이터베이스, 메시징 시스템과 같은 외부 시스템 연동

도메인 계층은 도메인의 핵심 규칙을 구현한다. (책 31p~33p 예시)

## 도메인 모델 도출

---

도메인에 대한 이해 없이 코딩을 시작할 수 없다.

→ 도메인 모델을 도출해야 코딩할 수 있음

**도메인 모델링할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것이다.**

**→ 요구사항에서 출발한다.**

분석한 요구사항을 도메인 모델을 만들어나가면 된다. (책 35p~40p)

### 문서화

문서화는 지식을 공유하기 위함

코드를 이용하여 전체 소프트웨어를 분석하려면 많은 시간을 투자해야 한다.

→ 상위 수준에서 정리한 문서가 필요함

문서를 통해 소프트웨어 전반을 이해하는 데 도움이 된다.

코드 자체도 문서화 대상이 된다.

→ 도메인 지식이 잘 묻어나도록 코드를 작성해야 코드를 이해하는데 큰 도움이 된다.

문서화와 도메인 관점에서 코드를 잘 표현할 수 있도록 노력하자!

## 엔티티와 밸류

---

도출한 모델은 엔티티와 밸류로 구분된다.

엔티티와 밸류를 제대로 구분해야 도메인을 올바르게 설계하고 구현할 수 있다.

### 엔티티

식별자를 가진다.

모든 엔티티는 서로 다른 식별자를 가진다.

엔티티의 식별자는 바뀌지 않고 고유하기 때문에 두 엔티티의 식별자가 같으면 두 엔티티는 같다고 판단

### 엔티티의 식별자 생성

- 특정 규칙에 따라 생성
- UUID, Nano ID와 같은 고유 식별자 생성기 사용
- 값을 직접 입력
- 일련번호 (오라클 시퀀스, MySQL AutoIncrement)

식별자는 특정 규칙에 따라 생성한다.

### 밸류 타입

밸류 타입은 **개념적으로 완전한 하나**를 표현할 때 사용한다. ex) 주소

의미를 명확하게 표현하기 위해 밸류 타입을 사용하는 경우도 있다.

**밸류 타입의 장점은 밸류 타입을 위한 기능을 추가할 수 있다는 것이다.**

밸류 타입의 객체의 데이터를 변경할 때는 기존 데이터를 변경하는 방법보다는 새로운 객체를 생성하는 방식을 선호한다.

### 엔티티 식별자와 밸류 타입

엔티티의 식별자의 실제 데이터는 String과 같은 문자열로 구성된 경우가 많다.

신용카드 번호와 같은 식별자는 특별한 의미를 가지는 경우가 많아 식별자를 위한 밸류 타입을 사용해서 의미가 잘 드러날 수 있게 할 수 있다.

### 도메인 모델에 set 메서드 넣지 않기

당연한 소리여서 생략

## 도메인 용어와 유비쿼터스 언어

---

코드를 작성할 때 도메인에서 사용하는 용어는 매우 중요하다!

**도메인에서 사용하는 용어를 코드에 반영해줘서 코드를 의미를 쉽게 해석할 수 있게 도와줘야한다.**

→ 코드의 가독성을 높여서 코드를 분석하고 이해하는 시간을 줄여야한다.

**유비쿼터스 언어: 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 문서, 도메인 모델, 코드, 테스트 등 모든 곳에서 같은 용어를 사용할 수 있게 제안**
